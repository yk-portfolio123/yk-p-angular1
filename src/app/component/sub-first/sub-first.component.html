<div class="root">
  <div class="grid">
    <button nz-button nzType="primary" nzSize="small" (click)="showModal()" style="margin-bottom: 8px;">
        <span nz-icon nzType="setting" nzTheme="outline"></span>
    </button>
    <div class="table-container">
      <nz-table
        #basicTable
        nzVirtualScroll
        class="nz-table-container"
        [nzData]="listOfData"
        [nzFrontPagination]="false"
        [nzShowPagination]="false"
        [nzWidthConfig]="widthConfig"
        [nzScroll]="{ y: '300px' }"
        nzSize="small">
        <thead>
          <tr class="sticky-header">
            <th *ngFor="let column of visibleColumns" nzEllipsis>{{ column.name }}</th>
          </tr>
        </thead>
        <tbody class="scrollable-tbody">
          <tr *ngFor="let data of basicTable.data"  (click)="onRowClick(data)">
            <td *ngFor="let column of visibleColumns" nzEllipsis [ngClass]="{'selected-row': data.id === selectedRowId}">{{ data[column.value] }}</td>
          </tr>
        </tbody>
      </nz-table>
    </div>
  </div>
  <nz-modal [(nzVisible)]="isVisible" nzTitle="Custom Column" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()">
    <ng-container *nzModalContent>
      <div nz-row [nzGutter]="24">
        <div nz-col class="gutter-row" [nzSpan]="12">
          <div class="example-container">
            <p>Displayed (drag and drop to sort)</p>
            <div class="example-box" *ngFor="let item of title">
              {{ item.name }}
            </div>
            <div
              cdkDropList
              #todoList="cdkDropList"
              [cdkDropListData]="fix"
              [cdkDropListConnectedTo]="[doneList]"
              class="example-list"
              (cdkDropListDropped)="drop($event)"
            >
              <div class="example-box" *ngFor="let item of fix; let i = index" cdkDrag>
                {{ item.name }}
                <span nz-icon nzType="minus-circle" nzTheme="outline" (click)="deleteCustom(item, i)"></span>
              </div>
            </div>
            <div class="example-box" *ngFor="let item of footer">
              {{ item.name }}
            </div>
          </div>
        </div>
        <div nz-col class="gutter-row" [nzSpan]="12">
          <div class="example-container">
            <p>Not Shown</p>
            <div
              cdkDropList
              #doneList="cdkDropList"
              [cdkDropListData]="notFix"
              [cdkDropListConnectedTo]="[todoList]"
              class="example-list"
              (cdkDropListDropped)="drop($event)"
            >
              <div class="example-box" *ngFor="let item of notFix; let i = index" cdkDrag>
                {{ item.name }}
                <span nz-icon nzType="plus-circle" nzTheme="outline" (click)="addCustom(item, i)"></span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
  </nz-modal>
  <div id="paper-container" #paperContainer>
    <div id="paper"></div>
  </div>
</div>
